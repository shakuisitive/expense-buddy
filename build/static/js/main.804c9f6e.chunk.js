(this["webpackJsonpmy-money"]=this["webpackJsonpmy-money"]||[]).push([[0],{10:function(e,t,n){e.exports={container:"Home_container__1USVs",content:"Home_content__hhRqu",sidebar:"Home_sidebar__59F3s",transactions:"Home_transactions__2fqWp",name:"Home_name__2JLnu",amount:"Home_amount__TNBQj"}},18:function(e,t,n){e.exports={navbar:"Navbar_navbar__2oMZG",title:"Navbar_title__3Yqjq"}},21:function(e,t,n){e.exports={"login-form":"Login_login-form__2jiNh"}},22:function(e,t,n){e.exports={"signup-form":"Signup_signup-form__xGI45"}},27:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(16),r=n.n(a),l=(n(27),n(13)),o=n(4),i=n(18),u=n.n(i),j=n(14),b=n(8),d=n(12);const O={apiKey:"AIzaSyAnj4XKHG0U74fE3kP9qZD2elbKr9-YNHU",authDomain:"mymoneyfinancetracker.firebaseapp.com",projectId:"mymoneyfinancetracker",storageBucket:"mymoneyfinancetracker.appspot.com",messagingSenderId:"1047159463162",appId:"1:1047159463162:web:c22e37aa53fa4f60f73d43",measurementId:"G-S0EC5FQBWG"},h=Object(j.a)(O),m=(Object(b.e)(h),Object(d.b)(h)),p=Object(b.e)();var x=n(3);let g=Object(c.createContext)();function f(e,t){switch(t.type){case"LOGIN":return{...e,user:t.payload};case"LOGOUT":return{...e,user:null};case"AUTH_IS_READY":return{...e,authIsReady:!0,user:t.payload};default:return e}}let y=e=>{let{children:t}=e,[n,s]=Object(c.useReducer)(f,{user:null,authIsReady:!1});return console.log("current state",n.user),Object(c.useEffect)((()=>{let e=m.onAuthStateChanged((t=>{s({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(x.jsx)(g.Provider,{value:{...n,dispatch:s},children:t})};var v=function(){let e=Object(c.useContext)(g);if(!e)throw new Error("Auth Context must be used within suitable children.");return e};function _(){let{logout:e}=function(){const[e,t]=Object(c.useState)(!1),[n,s]=Object(c.useState)(null),[a,r]=Object(c.useState)(!1);let{dispatch:l}=v();return Object(c.useEffect)((()=>t(!0)),[]),{logout:async()=>{s(null),r(!0);try{await m.signOut(),l({type:"LOGOUT"}),e||(r(!1),s(null))}catch(t){e||(console.log(t.message),s(t.message),r(!1))}},error:n,isPending:a}}(),{user:t}=v();return console.log(t),Object(x.jsx)("nav",{className:u.a.navbar,children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{className:u.a.title,children:Object(x.jsx)(l.b,{to:"/",children:"expenseBuddy"})}),!t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{children:Object(x.jsx)(l.b,{to:"signup",children:"Signup"})}),Object(x.jsx)("li",{children:Object(x.jsx)(l.b,{to:"login",children:"Login"})})]}),t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("li",{children:["Hello, ",t.displayName]}),Object(x.jsx)("li",{children:Object(x.jsx)("button",{onClick:()=>e(),className:"btn",children:"Logout"})})]})]})})}var S=n(10),N=n.n(S);let E={document:null,isPending:!1,error:null,success:null},A=(e,t)=>{switch(t.type){case"IS_PENDING":return{isPending:!0,document:null,success:!1,error:null};case"ADDED_DOCUMENT":return{...e,isPending:!1,document:t.payload,success:!0,error:null};case"ERROR":return{...e,isPending:!1,document:null,success:!1,error:t.payload};default:return e}};var D=function(e){let{uid:t}=e;const[n,s]=Object(c.useState)(""),[a,r]=Object(c.useState)("");let l=Object(c.useRef)(null),{addDocument:o,response:i}=function(e){let[t,n]=Object(c.useReducer)(A,E);const[s,a]=Object(c.useState)(!1);Object(j.a)(O);const r=Object(b.e)(),l=Object(b.b)(r,e);let o=e=>{s||n(e)};return Object(c.useEffect)((()=>()=>a(!0)),[]),{addDocument:async function(e){let{setName:t,setAmount:c}=arguments.length<=1?void 0:arguments[1];t(""),c(""),n({type:"IS_PENDING"});try{let t=await Object(b.a)(l,{...e,createdAt:Object(b.g)()});o({type:"ADDED_DOCUMENT",payload:t})}catch(s){o({type:"ERROR",payload:s.message})}},deleteDocument:async e=>{},response:t}}("transactions");return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:"Add a transaction"}),Object(x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o({name:n,amount:a,uid:t},{setName:s,setAmount:r}),l.current.focus()},children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("span",{children:"Transaction name:"}),Object(x.jsx)("input",{type:"text",onChange:e=>s(e.target.value),value:n,required:!0,ref:l})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("span",{children:"Amount ($):"}),Object(x.jsx)("input",{type:"number",onChange:e=>r(e.target.value),value:a,required:!0})]}),Object(x.jsx)("button",{children:"Add Transaction"})]})]})};var w=function(e){let{transactions:t}=e,{user:n}=v(),c=t.filter((e=>e.uid===n.uid));return c=c.filter((e=>e.createdAt&&"number"===typeof e.createdAt.seconds)),c.sort(((e,t)=>t.createdAt.seconds-e.createdAt.seconds)),Object(x.jsx)("ul",{className:N.a.transactions,children:c.map((e=>Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{className:N.a.name,children:e.name}),Object(x.jsxs)("p",{className:N.a.amount,children:["$",e.amount]}),Object(x.jsx)("button",{onClick:()=>{(e=>{let t=Object(b.d)(p,"transactions",e);Object(b.c)(t)})(e.id)},children:"X"})]},e.id)))})};var I=function(e){const[t,n]=Object(c.useState)(null),[s,a]=Object(c.useState)(null);return Object(c.useEffect)((()=>{const t=Object(b.b)(p,e);let c=Object(b.f)(t,(e=>{let t=[];e.docs.forEach((e=>{t.push({...e.data(),id:e.id})})),n(t),a(null)}),(e=>{console.log(e),a("Could not fetch the data")}));return()=>{c()}}),[e]),{documents:t,error:s}};var C=function(){let{user:e}=v(),{documents:t,error:n}=I("transactions");return Object(x.jsxs)("div",{className:N.a.container,children:[Object(x.jsxs)("div",{className:N.a.content,children:[n&&Object(x.jsx)("p",{children:n}),t&&Object(x.jsx)(w,{transactions:t})]}),Object(x.jsx)("div",{className:N.a.sidebar,children:Object(x.jsx)(D,{uid:e.uid})})]})};var P=n(21),R=n.n(P);var L=function(){const[e,t]=Object(c.useState)(""),[n,s]=Object(c.useState)("");let{login:a,error:r,isPending:l}=function(){const[e,t]=Object(c.useState)(!1),[n,s]=Object(c.useState)(null),[a,r]=Object(c.useState)(!1);let{dispatch:l}=v();return Object(c.useEffect)((()=>()=>t(!0)),[]),{login:async(t,n)=>{s(null),r(!0);try{const c=await Object(d.c)(m,t,n);console.log(c),l({type:"LOGIN",payload:c.user}),e||(r(!1),s(null))}catch(c){e||(console.log(c.message),s(c.message),r(!1))}},error:n,isPending:a}}();return Object(x.jsxs)("form",{onSubmit:t=>{t.preventDefault(),a(e,n)},className:R.a["login-form"],children:[Object(x.jsx)("h2",{children:"Login"}),Object(x.jsxs)("label",{children:[Object(x.jsx)("span",{children:"Email:"}),Object(x.jsx)("input",{value:e,onChange:e=>t(e.target.value),type:"email"})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("span",{children:"Password:"}),Object(x.jsx)("input",{value:n,type:"password",onChange:e=>s(e.target.value)})]}),l?Object(x.jsx)("button",{disabled:!0,className:"btn",children:"Logging in..."}):Object(x.jsx)("button",{className:"btn",children:"Login"}),r&&Object(x.jsx)("p",{children:r})]})};var G=function(){const[e,t]=Object(c.useState)(!1),[n,s]=Object(c.useState)(null),[a,r]=Object(c.useState)(!1);let{dispatch:l}=v();return Object(c.useEffect)((()=>()=>t(!0)),[]),{error:n,isPending:a,signup:async(t,n,c)=>{s(null),r(!0);try{const a=await Object(d.a)(m,t,n);if(!a)throw new Error("Could not complete signup");await Object(d.d)(a.user,{displayName:c}),l({type:"LOGIN",payload:a.user}),e||(r(!1),s(null))}catch(a){e||(console.log(a.message),s(a.message),r(!1))}}}},H=n(22),k=n.n(H);function T(){const[e,t]=Object(c.useState)(""),[n,s]=Object(c.useState)(""),[a,r]=Object(c.useState)("");let{error:l,isPending:o,signup:i}=G();return Object(x.jsxs)("form",{onSubmit:t=>{t.preventDefault(),i(e,n,a)},className:k.a["signup-form"],children:[Object(x.jsx)("h2",{children:"Signup"}),Object(x.jsxs)("label",{children:[Object(x.jsx)("span",{children:"Email:"}),Object(x.jsx)("input",{value:e,type:"text",onChange:e=>t(e.target.value)})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("span",{children:"Password:"}),Object(x.jsx)("input",{value:n,type:"password",onChange:e=>s(e.target.value)})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("span",{children:"Display name:"}),Object(x.jsx)("input",{value:a,type:"text",onChange:e=>r(e.target.value)})]}),!o&&Object(x.jsx)("button",{className:"btn",children:"Signup"}),o&&Object(x.jsx)("button",{disabled:!0,className:"btn",children:"Loading..."}),l&&Object(x.jsx)("p",{children:l})]})}var U=function(){let{authIsReady:e,user:t}=v();return Object(x.jsx)("div",{className:"App",children:e&&Object(x.jsxs)(l.a,{children:[Object(x.jsx)(_,{}),Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/",element:t?Object(x.jsx)(C,{}):Object(x.jsx)(o.a,{to:"/login"})}),Object(x.jsx)(o.b,{path:"login",element:t?Object(x.jsx)(o.a,{to:"/"}):Object(x.jsx)(L,{})}),Object(x.jsx)(o.b,{path:"signup",element:t?Object(x.jsx)(o.a,{to:"/"}):Object(x.jsx)(T,{})})]})]})})};r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(y,{children:Object(x.jsx)(U,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.804c9f6e.chunk.js.map